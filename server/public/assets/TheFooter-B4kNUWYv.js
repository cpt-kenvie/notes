import{u as h,f as p,r as f,h as k,x as I,o as l,c as i,a as e,t as d,w,i as C,g as b,z as L}from"./index-Bzc35kCV.js";import{_ as u,r as S}from"./_plugin-vue_export-helper-ByqkmB3O.js";const x={class:"dropdown"},y=["src","alt"],T={class:"username"},$={key:0,class:"dropdown-menu"},N={class:"menu-header"},V=["src","alt"],B={class:"user-details"},H={class:"menu-username"},U={class:"menu-email"},D={__name:"UserDropdown",setup(v){const a=h(),n=p(),t=f(!1),o=f({username:"",email:"",avatar_url:""}),c=async()=>{try{const r=localStorage.getItem("username"),s=await S(`/api/users/profile/${r}`);o.value=s.user}catch(r){console.error("获取用户信息失败:",r),a.error("获取用户信息失败:")}},_=()=>{a.success("退出成功"),localStorage.removeItem("token"),localStorage.removeItem("isLoggedIn"),localStorage.removeItem("user"),localStorage.removeItem("username"),n.push("/login")},g=()=>{n.push("/profile"),t.value=!1},m=r=>{const s=document.querySelector(".dropdown");s&&!s.contains(r.target)&&(t.value=!1)};return k(()=>{c(),document.addEventListener("click",m)}),I(()=>{document.removeEventListener("click",m)}),(r,s)=>(l(),i("div",x,[e("div",{class:"user-info",onClick:s[0]||(s[0]=w(F=>t.value=!t.value,["stop"]))},[e("img",{src:o.value.avatar_url||"https://img.keai.cool/2024/07/1/668a957f2a02f.png",alt:o.value.username,class:"avatar"},null,8,y),e("span",T,d(o.value.username),1)]),t.value?(l(),i("div",$,[e("div",N,[e("img",{src:o.value.avatar_url||"https://img.keai.cool/2024/07/1/668a957f2a02f.png",alt:o.value.username,class:"menu-avatar"},null,8,V),e("div",B,[e("div",H,d(o.value.username),1),e("div",U,d(o.value.email),1)])]),s[1]||(s[1]=e("div",{class:"menu-divider"},null,-1)),e("button",{class:"menu-item",onClick:g}," 个人资料 "),e("button",{class:"menu-item logout",onClick:_}," 退出登录 ")])):C("",!0)]))}},E=u(D,[["__scopeId","data-v-b7a5c8b3"]]),M={class:"header"},q={__name:"TheHeader",setup(v){const a=p(),n=()=>{a.push("/login")},t=()=>{a.push("/")};return(o,c)=>(l(),i("header",M,[e("div",{class:"logo",onClick:t},c[0]||(c[0]=[e("img",{src:"https://img.keai.cool/2024/07/1/668a957f2a02f.png",alt:"Logo"},null,-1)])),b(E,{onLogout:n})]))}},R=u(q,[["__scopeId","data-v-0cdef386"]]),z={},O={class:"footer"};function A(v,a){return l(),i("footer",O,a[0]||(a[0]=[L('<div class="footer-content" data-v-96ce9f89><div class="footer-left" data-v-96ce9f89><a href="https://kenvie.com" target="_blank" rel="noopener noreferrer" data-v-96ce9f89><img src="https://img.keai.cool/2024/07/1/668a957f2a02f.png" alt="Logo" class="footer-logo" data-v-96ce9f89></a><p class="copyright" data-v-96ce9f89>© 2024 Notes</p></div><div class="footer-right" data-v-96ce9f89><div class="footer-links" data-v-96ce9f89><a href="https://github.com/cpt-kenvie/notes" target="_blank" rel="noopener noreferrer" class="footer-link" data-v-96ce9f89><svg class="icon" viewBox="0 0 24 24" fill="currentColor" data-v-96ce9f89><path fill-rule="evenodd" clip-rule="evenodd" d="M12 2C6.477 2 2 6.477 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0012 2z" data-v-96ce9f89></path></svg><span data-v-96ce9f89>GitHub</span></a></div></div></div>',1)]))}const j=u(z,[["render",A],["__scopeId","data-v-96ce9f89"]]);export{R as T,j as a};
